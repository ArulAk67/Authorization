{"ast":null,"code":"import _regeneratorRuntime from\"A:/MERN/login_signup/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"A:/MERN/login_signup/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"A:/MERN/login_signup/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"A:/MERN/login_signup/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{getUser,getUsername}from'../helper/helper';axios.defaults.baseURL=\"https://mern-backend-6mj8.onrender.com/user\";/** custom hook */export default function useFetch(query){var _useState=useState({isLoading:false,apiData:undefined,status:null,serverError:null}),_useState2=_slicedToArray(_useState,2),getData=_useState2[0],setData=_useState2[1];useEffect(function(){if(!query)return;var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _ref2,username,_yield$getUser,data,status;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;setData(function(prev){return _objectSpread(_objectSpread({},prev),{},{isLoading:true});});if(query){_context.next=8;break;}_context.next=5;return getUsername();case 5:_context.t0=_context.sent;_context.next=9;break;case 8:_context.t0='';case 9:_ref2=_context.t0;username=_ref2.username;_context.next=13;return getUser(query);case 13:_yield$getUser=_context.sent;data=_yield$getUser.data;status=_yield$getUser.status;setData(function(prev){return _objectSpread(_objectSpread({},prev),{},{apiData:data});});if(status===200){setData(function(prev){return _objectSpread(_objectSpread({},prev),{},{isLoading:false});});setData(function(prev){return _objectSpread(_objectSpread({},prev),{},{apiData:data,status:status});});}setData(function(prev){return _objectSpread(_objectSpread({},prev),{},{isLoading:false});});_context.next=24;break;case 21:_context.prev=21;_context.t1=_context[\"catch\"](0);setData(function(prev){return _objectSpread(_objectSpread({},prev),{},{isLoading:false,serverError:_context.t1});});case 24:case\"end\":return _context.stop();}},_callee,null,[[0,21]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[query]);return[getData,setData];}","map":{"version":3,"names":["axios","useEffect","useState","getUser","getUsername","defaults","baseURL","useFetch","query","_useState","isLoading","apiData","undefined","status","serverError","_useState2","_slicedToArray","getData","setData","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref2","username","_yield$getUser","data","wrap","_callee$","_context","prev","next","_objectSpread","t0","sent","t1","stop","apply","arguments"],"sources":["A:/MERN/login_signup/client/src/hooks/fetch.hook.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { getUser, getUsername } from '../helper/helper'\r\n\r\naxios.defaults.baseURL = \"https://mern-backend-6mj8.onrender.com/user\";\r\n\r\n\r\n\r\n/** custom hook */\r\nexport default function useFetch(query){\r\n    const [getData, setData] = useState({ isLoading : false, apiData: undefined, status: null, serverError: null })\r\n    \r\n    useEffect(() => {\r\n\r\n        if(!query) return;\r\n        const fetchData = async () => {\r\n            try {\r\n                setData(prev => ({ ...prev, isLoading: true}));\r\n\r\n                 const { username } = !query ? await getUsername() : '';\r\n                \r\n                //  const { data, status } = !query ? await getUser(username) : await getUser(query);\r\n                \r\n                const { data, status } = await getUser(query);\r\n                \r\n                setData(prev=>({...prev,apiData:data}))\r\n                 if(status === 200){\r\n                    setData(prev => ({ ...prev, isLoading: false}));\r\n                    setData(prev => ({ ...prev, apiData : data, status: status }));\r\n                }\r\n\r\n                setData(prev => ({ ...prev, isLoading: false}));\r\n            } catch (error) {\r\n                setData(prev => ({ ...prev, isLoading: false, serverError: error }))\r\n            }\r\n        };\r\n        fetchData()\r\n\r\n    }, [query]);\r\n\r\n\r\n    return [getData, setData];\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}