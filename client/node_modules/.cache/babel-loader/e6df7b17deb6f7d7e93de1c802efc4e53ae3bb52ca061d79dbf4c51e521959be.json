{"ast":null,"code":"import _regeneratorRuntime from\"A:/MERN/login_signup/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"A:/MERN/login_signup/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"A:/MERN/login_signup/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import styles from'../styles/Username.module.css';import toast,{Toaster}from'react-hot-toast';import{useAuthStore}from'../store/store';import{useNavigate}from'react-router-dom';import{generateOTP,verifyOTP}from'../helper/helper';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Recovery(){var _useAuthStore=useAuthStore(function(state){return state.auth;}),username=_useAuthStore.username;console.log(\"rec\"+username);var _useState=useState(),_useState2=_slicedToArray(_useState,2),OTP=_useState2[0],setOTP=_useState2[1];var navigate=useNavigate();useEffect(function(){generateOTP(username).then(function(OTP){console.log(OTP);if(OTP)return toast.success('OTP has been send to your email!');return toast.error('Problem while generating OTP!');});},[username]);function onSubmit(_x){return _onSubmit.apply(this,arguments);}// handler of resend OTP\nfunction _onSubmit(){_onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _yield$verifyOTP,status;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return verifyOTP({username:username,code:OTP});case 4:_yield$verifyOTP=_context.sent;status=_yield$verifyOTP.status;if(!(status===201)){_context.next=9;break;}toast.success('Verify Successfully!');return _context.abrupt(\"return\",navigate('/reset'));case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);return _context.abrupt(\"return\",toast.error('Wront OTP! Check email again!'));case 14:case\"end\":return _context.stop();}},_callee,null,[[1,11]]);}));return _onSubmit.apply(this,arguments);}function resendOTP(){var sentPromise=generateOTP(username);toast.promise(sentPromise,{loading:'Sending...',success:/*#__PURE__*/_jsx(\"b\",{children:\"OTP has been send to your email!\"}),error:/*#__PURE__*/_jsx(\"b\",{children:\"Could not Send it!\"})});sentPromise.then(function(OTP){console.log(OTP);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto\",children:[/*#__PURE__*/_jsx(Toaster,{position:\"top-center\",reverseOrder:false}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:styles.glass,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-5xl font-bold\",children:\"Recovery\"}),/*#__PURE__*/_jsx(\"span\",{className:\"py-4 text-xl w-2/3 text-center text-gray-500\",children:\"Enter OTP to recover password          \"})]}),/*#__PURE__*/_jsx(\"form\",{className:\"pt-20\",onSubmit:onSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"textbox flex flex-col items-center gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input text-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"py-4 text-sm text-left text-gray-500\",children:\"Enter 6 digit OTP sent to your email address.\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setOTP(e.target.value);},className:styles.textbox,type:\"text\",placeholder:\"OTP\"})]}),/*#__PURE__*/_jsx(\"button\",{className:styles.btn,type:\"submit\",children:\"Recovery\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-4\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500\",children:[\"Can't get OTP? \",/*#__PURE__*/_jsx(\"button\",{onClick:resendOTP,className:\"text-red-500\",children:\"Resend\"})]})})]})})]});}export default Recovery;","map":{"version":3,"names":["React","useEffect","useState","styles","toast","Toaster","useAuthStore","useNavigate","generateOTP","verifyOTP","jsx","_jsx","jsxs","_jsxs","Recovery","_useAuthStore","state","auth","username","console","log","_useState","_useState2","_slicedToArray","OTP","setOTP","navigate","then","success","error","onSubmit","_x","_onSubmit","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","_yield$verifyOTP","status","wrap","_callee$","_context","prev","next","preventDefault","code","sent","abrupt","t0","stop","resendOTP","sentPromise","promise","loading","children","className","position","reverseOrder","glass","onChange","target","value","textbox","type","placeholder","btn","onClick"],"sources":["A:/MERN/login_signup/client/src/components/Recovery.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\n\r\nimport styles from '../styles/Username.module.css';\r\nimport toast, {Toaster} from 'react-hot-toast';\r\nimport { useAuthStore } from '../store/store';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { generateOTP, verifyOTP } from '../helper/helper';\r\n\r\nfunction Recovery() {\r\n\r\n  const { username } = useAuthStore(state => state.auth);\r\n  console.log(\"rec\"+username);\r\n  const [OTP, setOTP] = useState();\r\n  const navigate = useNavigate()\r\n\r\n  useEffect(() => {\r\n    generateOTP(username).then((OTP) => {\r\n      console.log(OTP)\r\n      if(OTP) return toast.success('OTP has been send to your email!');\r\n      return toast.error('Problem while generating OTP!')\r\n    })\r\n  }, [username]);\r\n\r\n  async function onSubmit(e){\r\n    e.preventDefault();\r\n    try {\r\n      let { status } = await verifyOTP({ username, code : OTP })\r\n      if(status === 201){\r\n        toast.success('Verify Successfully!')\r\n        return navigate('/reset')\r\n      }  \r\n    } catch (error) {\r\n      return toast.error('Wront OTP! Check email again!')\r\n    }\r\n  }\r\n\r\n  // handler of resend OTP\r\n  function resendOTP(){\r\n\r\n    let sentPromise = generateOTP(username);\r\n\r\n    toast.promise(sentPromise ,\r\n      {\r\n        loading: 'Sending...',\r\n        success: <b>OTP has been send to your email!</b>,\r\n        error: <b>Could not Send it!</b>,\r\n      }\r\n    );\r\n\r\n    sentPromise.then((OTP) => {\r\n      console.log(OTP)\r\n    });\r\n    \r\n  }\r\n\r\n\r\n  return (\r\n    <div className='container mx-auto'>\r\n      \r\n      <Toaster position='top-center' reverseOrder={false}></Toaster>\r\n\r\n      <div className='flex justify-center items-center h-screen'>\r\n        <div className={styles.glass}>\r\n          <div className='title flex flex-col items-center'>\r\n             <h4 className='text-5xl font-bold'>Recovery</h4>\r\n             <span className='py-4 text-xl w-2/3 text-center text-gray-500'>\r\n                 Enter OTP to recover password          </span>\r\n          </div>\r\n          <form className='pt-20' onSubmit={onSubmit}>\r\n            \r\n            <div className='textbox flex flex-col items-center gap-6'>\r\n              <div className='input text-center'>\r\n\r\n                <span className='py-4 text-sm text-left text-gray-500'>\r\n                  Enter 6 digit OTP sent to your email address.\r\n                </span>\r\n                <input onChange={(e)=>setOTP(e.target.value)} className={styles.textbox} type='text' placeholder='OTP'/>\r\n\r\n              </div>\r\n              \r\n              <button className={styles.btn} type='submit'>Recovery</button>\r\n            </div>\r\n          </form>\r\n            <div className='text-center py-4'>\r\n              <span className='text-gray-500'>Can't get OTP? <button onClick={resendOTP} className='text-red-500'>Resend</button></span>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Recovery;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}